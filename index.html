<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>WebRTC Counter</title>
    <style>
      #counter {
        font-size: 2em;
        text-align: center;
      }
      button {
        font-size: 1.5em;
        margin: 10px;
        padding: 10px 20px;
      }
    </style>
  </head>
  <body>
    <div id="counter">0</div>
    <button id="increment">Click me!</button>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();

      // Initialize the counter value
      let counter = 0;

      // Update the counter display with the current value
      function updateCounterDisplay() {
        const counterDisplay = document.getElementById('counter');
        counterDisplay.innerText = counter;
      }

      // Increment the counter and update the display
      function incrementCounter() {
        counter++;
        updateCounterDisplay();
        // Send a message to the other peer to indicate that the counter was incremented
        socket.emit('counter-incremented', counter);
      }

      // Handle incoming messages from the other peer
      socket.on('counter-incremented', (newCounterValue) => {
        counter = newCounterValue;
        updateCounterDisplay();
      });

      // Attach the incrementCounter function to the button click event
      document
        .getElementById('increment')
        .addEventListener('click', incrementCounter);
    </script>
  </body>
</html>
